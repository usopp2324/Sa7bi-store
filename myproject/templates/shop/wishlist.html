{% extends 'base.html' %}

{% block title %}Your Wishlist — Sa7bi{% endblock %}

{% block content %}
<style>
  .wishlist-wrap {
    position: relative;
    overflow: hidden;
  }

  .wishlist-glow {
    position: absolute;
    inset: -40% auto auto -30%;
    width: 420px;
    height: 420px;
    background: radial-gradient(circle, rgba(239, 68, 68, 0.3), transparent 65%);
    filter: blur(20px);
    opacity: 0.6;
    pointer-events: none;
  }

  .wishlist-hero {
    background: linear-gradient(155deg, rgba(20, 20, 30, 0.95), rgba(10, 10, 16, 0.98));
    border: 1px solid rgba(239, 68, 68, 0.2);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.45);
  }

  .wishlist-card {
    background: linear-gradient(160deg, rgba(20, 20, 30, 0.96), rgba(10, 10, 16, 0.98));
    border: 1px solid rgba(255, 255, 255, 0.06);
    transition: transform 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;
  }

  .wishlist-card:hover {
    transform: translateY(-6px);
    border-color: rgba(239, 68, 68, 0.45);
    box-shadow: 0 24px 44px rgba(239, 68, 68, 0.2);
  }

  .wishlist-image {
    position: relative;
    overflow: hidden;
  }

  .wishlist-image::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(140deg, rgba(255, 255, 255, 0.16), transparent 60%);
    opacity: 0;
    transition: opacity 0.35s ease;
  }

  .wishlist-card:hover .wishlist-image::after {
    opacity: 1;
  }

  .wishlist-pill {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 6px 14px;
    border-radius: 999px;
    font-size: 11px;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    background: rgba(239, 68, 68, 0.15);
    border: 1px solid rgba(239, 68, 68, 0.35);
    color: #fca5a5;
  }
</style>

<div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 wishlist-wrap">
  <div class="wishlist-glow"></div>
  <div class="wishlist-hero rounded-3xl p-8 md:p-10 mb-10 relative overflow-hidden">
    <div class="relative z-10">
      <span class="wishlist-pill">Saved Picks</span>
      <h1 class="text-3xl sm:text-4xl font-black mt-4">Your <span class="gradient-text">Wishlist</span></h1>
      <p class="text-gray-400 mt-3 max-w-2xl">Keep your favorite services ready. Jump back in anytime and move them to checkout in seconds.</p>
      <div class="mt-6 flex flex-wrap gap-3">
        <a href="{% url 'shop:shop_list' %}" class="px-5 py-2 rounded-xl bg-gradient-to-r from-primary to-secondary font-semibold">Browse Shop</a>
        <span class="px-4 py-2 rounded-xl border border-dark-700 text-sm text-gray-300">{{ items.count|default:0 }} item{{ items.count|pluralize }}</span>
      </div>
    </div>
  </div>

  {% if items.exists %}
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      {% for item in items %}
        <div class="wishlist-card rounded-3xl p-5 flex flex-col sm:flex-row gap-5">
          <div class="wishlist-image w-full sm:w-36 h-36 rounded-2xl bg-dark-700 flex items-center justify-center">
            {% if item.product.image %}
              <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}" class="w-full h-full object-cover rounded-2xl" />
            {% else %}
              <div class="w-full h-full flex items-center justify-center text-gray-500 text-sm">No image</div>
            {% endif %}
          </div>
          <div class="flex-1 flex flex-col justify-between">
            <div>
              <a href="{% url 'shop:product_detail' item.product.slug %}" class="text-white text-lg font-semibold hover:text-primary transition">{{ item.product.name }}</a>
              <p class="text-sm text-gray-400 mt-2 line-clamp-2">{{ item.product.description|default:"No description available." }}</p>
            </div>
            <div class="mt-4 flex flex-wrap items-center justify-between gap-3">
              <div>
                <p class="text-xs text-gray-500 uppercase tracking-wide">Price</p>
                <p class="text-xl font-black gradient-text">€{{ item.product.price }}</p>
              </div>
              <div class="flex items-center gap-3">
                <a href="{% url 'shop:product_detail' item.product.slug %}" class="px-4 py-2 border border-primary/30 rounded-xl text-sm hover:bg-dark-700 transition">View</a>
                <form method="post" action="{% url 'shop:remove_from_wishlist' item.product.id %}">
                  {% csrf_token %}
                  <button type="submit" class="px-4 py-2 bg-red-600 text-white rounded-xl text-sm hover:bg-red-500 transition">Remove</button>
                </form>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="bg-dark-800 border border-dark-700 rounded-3xl p-10 text-center">
      <div class="w-16 h-16 mx-auto rounded-2xl bg-dark-700 flex items-center justify-center text-primary mb-4">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l9 6 9-6-9-4-9 4zm0 6l9 6 9-6" />
        </svg>
      </div>
      <h2 class="text-2xl font-bold">No favorites yet</h2>
      <p class="text-gray-400 mt-2">Browse the shop and tap the heart to save items for later.</p>
      <a href="{% url 'shop:shop_list' %}" class="inline-flex mt-6 px-6 py-3 bg-gradient-to-r from-primary to-secondary rounded-xl font-semibold">Explore Shop</a>
    </div>
  {% endif %}
</div>
{% endblock %}
